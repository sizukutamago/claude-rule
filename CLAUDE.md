# プロジェクト概要

## プロジェクト名
[プロジェクト名を記載]

## 説明
[プロジェクトの簡潔な説明を記載]

## 技術スタック
- 言語: TypeScript
- パッケージマネージャ: pnpm
- フレームワーク: [React/Vue/Next.js/Express/etc.]
- データベース: [PostgreSQL/MongoDB/Redis/etc.]
- ツール: [Docker/Git/etc.]

# 開発哲学

## コア原則: **Less is more（少ないほど良い）**

すべての実装を、可能な限り小さく、そして明白に保つ。

## ガイドライン

- **まずはシンプルに** – 動作する中で最も単純なデータ構造と API を選ぶ
- **不要な抽象化を避ける** – 重複が問題になるときにのみリファクタリングする
- **デッドコードは早期に削除** – 未使用のファイル／依存関係は削除する
- **依存関係を最小化** – 依存を追加する前に「既存のもので実現できないか？」と自問する
- **一貫性が勝つ** – 既存の命名とファイル配置のパターンに従う
- **暗黙より明示** – しゃれたトリックより、明確で説明的な名前と型注釈を優先する
- **早く失敗する** – 入力を検証し、早めに例外を投げ、対処可能なエラーを提示する
- **コードに語らせる** – 複数段落のコメントが必要なら、意図が自明になるまでリファクタリングする

## 関数型プログラミングのプラクティス
- **純粋関数を優先**
- **不変データ構造を使用**
- **副作用を分離**
- **型安全性を確保**

# コーディング規約

## フォーマット
- インデント: 2スペース
- 最大行長: 80文字
- セミコロン: 不要（Prettierデフォルト）
- クォート: シングルクォート優先

## 命名規則
- 変数・関数: camelCase
- 定数: UPPER_SNAKE_CASE
- クラス・型・インターフェース: PascalCase
- ファイル名: kebab-case
- Reactコンポーネント: PascalCase
- テストファイル: *.test.ts, *.spec.ts

## コード品質
- ESLint/Prettier設定に従う
- 型注釈を必ず付ける（any型は原則禁止）
- 複雑な関数にはJSDocコメントを追加
- 早期リターンを活用
- ハードコーディングを避け、環境変数を使用
- strictモードを有効化（tsconfig.json）

# 開発環境セットアップ

## 必要なツール
- Node.js: v18以上
- pnpm: v8以上
- エディタ: VS Code推奨
- TypeScript: v5以上

## 初期セットアップ
```bash
# リポジトリのクローン
git clone [repository-url]
cd [project-name]

# pnpmのインストール（未インストールの場合）
npm install -g pnpm

# 依存関係のインストール
pnpm install

# 環境変数の設定
cp .env.example .env
# .envファイルを編集して必要な値を設定

# 開発サーバーの起動
pnpm dev
```

# 実装タスクの進め方

タスクを行う際は以下の順番で進めてください：

## 1. 計画フェーズ
実装を始める前に指示された内容を確認して実行の計画を立ててください。
「実行の計画を立てます！」と宣言してから開始。

## 2. TDDフェーズ
[TDDの進め方]セクションに沿ってテスト駆動開発を行ってください。
「TDDを進めます！」と宣言してから開始。

## 3. 実装フェーズ
テストに合格するコードを実装してください。
「実装を進めます！」と宣言してから開始。

## 4. 品質テストフェーズ
品質を高めるテストを追加記載してください。
カバレッジ目標: C0/C1/C2それぞれ80%以上
「品質テストを実装します！」と宣言してから開始。

## 5. コミットフェーズ
git commitを行い、タスクの概要を簡潔にまとめたメッセージを記載。
「git commitを実施します！」と宣言してから開始。

## タスク実行時の重要な規約
- 指示内容を実行できない場合は、タスクを止めてユーザに指示を仰ぐ
- 外部サービス接続で認証情報が不足している場合は、モックを作成せずユーザに確認
- ハードコーディングを避け、環境変数を使用
- 実装完了時に既存機能のデグレードを確認（テスト実行または動作確認）

# TDD（テスト駆動開発）

## TDDサイクル

### 1. Red フェーズ
適切なテストファイルを作成:
- Vitest を用いた `.test.ts` または `.spec.ts`
- テストファイルは対象ファイルと同じディレクトリに配置

包括的なテストを書く:
- 日本語で明確な説明を付ける
- エッジケースを含める
- テストが意味のある失敗をすることを確認
- describe/it/expectパターンを使用

### 2. Green フェーズ
- コンパイルは通るがテストは失敗するスケルトン実装を作成
- テストに合格する最小限のコードを実装

### 3. Refactor フェーズ
- テストを通し続けながらリファクタリング
- コードの品質と可読性を改善

## TDD ベストプラクティス
- 実装より先にテストを書く
- 可能であればテストあたり1つのアサーション
- ふるまいを記録する記述的なテスト名
- エッジケースやエラー条件をテスト
- 外部依存は適切にモック
- テストは高速かつ独立に保つ
- AAA パターン（Arrange, Act, Assert）に従う

# ビルド・テスト・開発コマンド

## 必須コマンド（コード変更後）
```bash
# コードフォーマット
pnpm format

# 型チェック
pnpm check-types

# リント
pnpm lint
```

## 開発コマンド
```bash
# 開発サーバー起動
pnpm dev

# ビルド
pnpm build

# テスト実行
pnpm test

# テスト（ウォッチモード）
pnpm test:watch

# カバレッジ確認
pnpm test:coverage

# 型チェック（watchモード）
pnpm check-types:watch
```

# アーキテクチャガイドライン

## ディレクトリ構造
```
project-root/
├── src/                  # ソースコード
│   ├── components/       # UIコンポーネント
│   ├── services/         # ビジネスロジック
│   ├── utils/           # ユーティリティ関数
│   ├── types/           # 型定義
│   ├── hooks/           # カスタムフック（React）
│   └── __tests__/       # 統合テスト
├── public/              # 静的ファイル
├── config/              # 設定ファイル
├── .env.example         # 環境変数サンプル
├── tsconfig.json        # TypeScript設定
├── vite.config.ts       # Vite設定
└── vitest.config.ts     # Vitest設定
```

## 設計パターン
- 単一責任の原則（SRP）を守る
- 依存性注入（DI）を活用
- レイヤードアーキテクチャを採用
- ドメイン駆動設計（DDD）の概念を適用

## データフロー
- 単方向データフローを維持
- 状態管理は明確に分離
- 副作用は境界で処理

# プルリクエスト・ガイドライン

## いつプルリクエストを作成するか

- **意味のある最小単位で PR を作成** — 1コミットや約20行の差分でも可
- 未リリース機能はFeature Flagで保護
- PRを提出したら、そのブランチから新しいブランチを切って開発を継続

## 「意味のある単位」とは

- あらゆるUI変更（枠線色、文字色、サイズなど）
- 関数名の変更やフォルダ構成の変更
- 自己完結した改善や修正

## サイズの目安

- **約500行**: 現在の作業をPRとしてまとめることを検討
- **1000行**: 最大閾値 — これを超えないようにする
- APIとUIの変更が結びついている場合は大きな差分も許容されるが、可能な限り分割

## PRメッセージのフォーマット
```
[タイプ] 簡潔なタイトル

## 変更内容
- 変更点1
- 変更点2

## テスト
- [ ] ユニットテスト追加/更新
- [ ] 手動テスト完了

## レビューポイント
- 特に確認してほしい箇所
```

# Git ワークフロー

## ブランチ戦略
- main/master: プロダクション環境
- develop: 開発環境
- feature/*: 新機能開発
- bugfix/*: バグ修正
- hotfix/*: 緊急修正

## コミットメッセージ規約
```
[type]: [簡潔な説明]

[詳細な説明（任意）]

[issue番号（任意）]
```

タイプ:
- feat: 新機能
- fix: バグ修正
- docs: ドキュメント
- style: フォーマット
- refactor: リファクタリング
- test: テスト
- chore: その他

# トラブルシューティング

## よくある問題と解決方法

### 依存関係のエラー
```bash
# node_modulesとpnpm-lock.yamlを削除して再インストール
rm -rf node_modules pnpm-lock.yaml
pnpm install

# キャッシュクリア
pnpm store prune
```

### ポート競合
```bash
# 使用中のポートを確認
lsof -i :[port-number]
# プロセスを終了
kill -9 [PID]
```

### 環境変数が読み込まれない
- .envファイルの存在確認
- 環境変数名の大文字小文字確認
- Viteの場合: VITE_プレフィックスを確認
- process.env.VITE_*でアクセス
- dotenvパッケージの設定確認

## デバッグ手順
1. TypeScriptのエラーメッセージを確認
2. console.logまたはdebuggerステートメントを追加
3. Vitestで単体テストを作成して再現
4. VS Codeデバッガーでステップ実行
5. 問題を修正してpnpm testで確認

# 追加リソース

## ドキュメント
- [公式ドキュメントURL]
- [API仕様書URL]
- [デザインシステムURL]

## ツール
- [開発ツール1のURL]
- [開発ツール2のURL]

## 連絡先
- 技術的な質問: [Slackチャンネル/メール]
- バグ報告: [Issue TrackerのURL]
- 機能リクエスト: [Feature RequestのURL]

# 注意事項

## セキュリティ
- 秘密情報をコードにハードコーディングしない
- 環境変数を使用して機密情報を管理
- .gitignoreに機密ファイルを追加
- 定期的に依存関係の脆弱性をチェック

## パフォーマンス
- 不要な再レンダリングを避ける
- 大きなデータセットは遅延読み込み
- 画像は最適化して使用
- バンドルサイズを監視

## アクセシビリティ
- セマンティックHTMLを使用
- ARIAラベルを適切に付与
- キーボードナビゲーション対応
- スクリーンリーダー対応

---

このドキュメントは定期的に更新してください。
プロジェクトの成長に合わせて、新しいセクションを追加し、既存の内容を改善してください。